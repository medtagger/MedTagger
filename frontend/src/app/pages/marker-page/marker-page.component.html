<div class="marker-page">
    <div class="marker-toolbox">
        <div class="tags">
            <h3>Available Tags</h3>
            <mat-form-field>
                <mat-select placeholder="Current Tag" required>
                    <mat-option *ngFor="let tag of tags" [value]="tag.key">
                        {{ tag.name }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="tools">
            <h3>Available Tools</h3>
            <div class="buttons">
                <button mat-mini-fab><mat-icon>crop</mat-icon></button>
                <button mat-mini-fab disabled><mat-icon>brush</mat-icon></button>
                <button mat-mini-fab disabled><mat-icon svgIcon="eraser"></mat-icon></button>
                <button mat-mini-fab disabled><mat-icon svgIcon="gesture-tap"></mat-icon></button>
                <button mat-mini-fab disabled><mat-icon>timeline</mat-icon></button>
                <button mat-mini-fab disabled><mat-icon>zoom_in</mat-icon></button>
                <button mat-mini-fab disabled><mat-icon>zoom_out</mat-icon></button>
            </div>
        </div>
        
        <div class="labels">
            <h3>Your Labels</h3>
            <mat-list dense>
                <div *ngFor="let tag of tags">
                    <h4 matSubheader>
                        {{ tag.name }}
                        <mat-icon *ngIf="!tag.hidden" (click)="tag.hidden = true;" class="clickable">arrow_drop_up</mat-icon>
                        <mat-icon *ngIf="tag.hidden" (click)="tag.hidden = false;" class="clickable">arrow_drop_down</mat-icon>
                    </h4>
                    <div *ngIf="!tag.hidden">
                        <mat-list-item *ngFor="let label of getLabelsForTag(tag)"
                                       (mouseenter)="label.hovered=true"
                                       (mouseleave)="label.hovered=false">
                            <p matLine><mat-icon class="size-16px">crop</mat-icon> Slice #{{ label.sliceIndex }}</p>
                            <button mat-icon-button *ngIf="label.hovered"><mat-icon class="size-16px">delete</mat-icon></button>
                            <button mat-icon-button *ngIf="label.hovered || label.pinned" (click)="label.pinned=!label.pinned">
                                <mat-icon *ngIf="!label.pinned" class="smaller-svg" svgIcon="pin-off"></mat-icon>
                                <mat-icon *ngIf="label.pinned" class="smaller-svg" svgIcon="pin"></mat-icon>
                            </button>
                            <button mat-icon-button (click)="label.visible=!label.visible">
                                <mat-icon *ngIf="label.visible" class="size-16px">visibility</mat-icon>
                                <mat-icon *ngIf="!label.visible" class="size-16px">visibility_off</mat-icon>
                            </button>
                        </mat-list-item>
                    </div>
                    <mat-divider></mat-divider>
                </div>

                <!--
                <h4 matSubheader>Left Kidney<mat-icon>arrow_drop_up</mat-icon></h4>
                <mat-list-item>
                    <p matLine><mat-icon class="size-16px">crop</mat-icon> Slice #24</p>
                    <button mat-icon-button><mat-icon class="size-16px">delete</mat-icon></button>
                    <button mat-icon-button><mat-icon class="smaller-svg" svgIcon="pin"></mat-icon></button>
                    <button mat-icon-button><mat-icon class="size-16px">visibility</mat-icon></button>
                </mat-list-item>
                <mat-list-item>
                    <p matLine><mat-icon class="size-16px">crop</mat-icon> Slice #25</p>
                    <button mat-icon-button><mat-icon class="size-16px">visibility</mat-icon></button>
                </mat-list-item>
                <mat-list-item>
                    <p matLine><mat-icon class="size-16px">crop</mat-icon> Slice #26</p>
                    <button mat-icon-button><mat-icon class="size-16px">visibility_off</mat-icon></button>
                </mat-list-item>
                <mat-divider></mat-divider>
                <h4 matSubheader>Right Kidney<mat-icon>arrow_drop_up</mat-icon></h4>
                <mat-list-item>
                    <p matLine><mat-icon class="size-16px">crop</mat-icon> Slice #27</p>
                    <button mat-icon-button><mat-icon class="size-16px">visibility</mat-icon></button>
                </mat-list-item>
                -->
            </mat-list>
        </div>

        <div class="actions">
            <h3>Actions</h3>
            <div class="buttons">
                <button mat-raised-button color="primary" (click)="skipScan()" *ngIf="!this.marker.selectionState.hasArchive" [disabled]="this.marker.downloadingScanInProgress">
                    Skip scan
                </button>
                <!--
                <button mat-raised-button color="primary" (click)="skipScan()" *ngIf="this.marker.selectionState.hasArchive" [disabled]="this.marker.downloadingScanInProgress">
                    Next scan
                </button>
                -->
                <button mat-raised-button color="accent" [disabled]="!this.marker.selectionState.isValid" (click)="sendCompleteLabel()">
                    Send label
                </button>
                <!--
                <button mat-raised-button color="accent" [disabled]="this.marker.selectionState.hasArchive || this.marker.selectionState.isValid || this.marker.downloadingScanInProgress" (click)="sendEmptyLabel()">
                    Nothing to tag
                </button>
                -->
            </div>
        </div>
    </div>
    <div class="marker-content">
        <div class="innerElement canvasInterface">
            <app-marker-component #marker></app-marker-component>
        </div>
    </div>
</div>
