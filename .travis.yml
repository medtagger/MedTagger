sudo: true
dist: trusty
language: python
services:
- docker
before_install:
- git remote set-branches --add origin master
- git fetch
jobs:
  include:
      #  - stage: test backend
      #script:
      #- ./.travis/test_change_in_subproject.py backend --command="cd backend &&
      #docker-compose build &&
      #docker-compose run data_labeling_api make test"
  - stage: test backend
    script:
    - ./.travis/test_change_in_subproject.py backend --command="cd backend &&
      sudo add-apt-repository ppa:jonathonf/python-3.6 &&
      sudo apt-get update &&
      sudo apt install -y python3.6 &&
      sudo apt install -y python3.6-dev &&
      sudo apt install -y python3-pip &&
      make venv &&
      ./devenv.sh &&
      make functional_tests"
      # - stage: test frontend
      # script:
      # - ./.travis/test_change_in_subproject.py frontend --command="cd frontend && docker
      #build ."
