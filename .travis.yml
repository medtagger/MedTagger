sudo: true
dist: trusty
language: python
services:
- docker
before_install:
- git remote set-branches --add origin master
- git fetch
jobs:
  include:
      #  - stage: test backend
      #script:
      #- ./.travis/test_change_in_subproject.py backend --command="cd backend &&
      #docker-compose build &&
      #docker-compose run data_labeling_api make test"
  - stage: test backend
    script:
    - ./.travis/test_change_in_subproject.py backend --command="
       docker-compose -f backend/tests/functional_tests/docker-compose.yml up -d hbase postgres rabbitmq &&
       docker-compose -f backend/tests/functional_tests/docker-compose.yml run functional_tests &&
       docker-compose down"
      # - stage: test frontend
      # script:
      # - ./.travis/test_change_in_subproject.py frontend --command="cd frontend && docker
      #build ."
